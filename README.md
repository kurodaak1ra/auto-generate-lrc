# 歌词一键生成脚本

### 本脚本通过调用网上大佬写的 Node.js 版网易云音乐 API ，来实现自动匹配歌曲歌词，在本地生成同名的、相对纯净的LRC文件

### 目前匹配含有详细信息的歌曲准确率可达到95+，已测试了2000+首Hi-Res歌曲和少部分整轨切出来的单手，但都含有详细信息的歌曲，匹配效果很好，没有详细信息的给钱匹配效果。。。毕竟可供筛选项太少了

### 说明：<br>
该脚本只适用于有详细属性的音乐文件<br>
需要用到的属性有：标题（歌曲名）、参与创作的艺术家、唱片集（专辑）、唱片集艺术家（windows 右键属性 转 详细信息）<br>
如果没有上述四个属性，则只会匹配歌曲名和时长<br>
目前可供匹配的格式的只有 flac、wav、mp3，其他未测试（代码做了限制直接跳过）

### 运行环境
PHP（我用的是 7+）<br>
由于程序需要长时间不断调用 API，所以执行时间随文件数量直线增加，请更改 php.ini 的 max_execution_time 到比较合适的值（调大点就对了23333）

### 需要的插件
getID3（用于读取歌曲信息）<br>
PHP 的 OpenCC 拓展（当然，也可以选择不使用 OpenCC）

### 为什么要用 OpenCC
在之前生成歌词的时候（我主要是 Anime 的 Hi-Res 歌曲）一些歌曲名字里面含有日本汉字（也就是繁体），但是网易上面是简体，所以就会匹配不到，所以转换一下，增大匹配到的几率

### 歌曲匹配
第一次：歌曲名+专辑名<br>
第二次：歌曲名<br>
第三次：OpenCC 转简体后的歌曲名+专辑名<br>
第四次：OpenCC 转简体后的歌曲名<br>
第五次：OpenCC 转繁体后的歌曲名+专辑名<br>
第六次：OpenCC 转繁体后的歌曲名<br>
（反正总有一次能匹配上 23333）

### PHP 环境搭建
（小白用户）<br>
Windows 推荐 WAMP<br>
Mac 推荐 XAMPP<br>
Linux ... 自己搭吧

### 匹配精度
因为自动脚本无人工干预，所以要留有容差<br>
歌曲名字和艺术家名字最小匹配精度 0（无限制），最大匹配精度 100（完全匹配），不需要 %<br>
歌曲时长偏移量，0（时长完全一致），最大误差半分钟，前后误差 N 秒以内（以本地歌曲时长作为标准值，API获取到的时长上做增减），不需要 s

### Node.js 版 网易云音乐 API
https://github.com/Binaryify/NeteaseCloudMusicApi<br>
看教程自己搭建 API<br>
(网上有个现成的 API，不过貌似做了限制，没办法调用而且还被墙了：https://163.fczbl.vip)

### PHP OpenCC Win 版编译
https://github.com/NauxLiu/opencc4php/pull/16

### getID3
http://getid3.sourceforge.net/<br>
下载后解压到和脚本同级目录，文件夹命名为：getid3（路径在脚本176行，如有需要请自行修改）
